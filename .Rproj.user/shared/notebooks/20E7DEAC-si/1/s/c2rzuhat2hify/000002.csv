"0","survival_rates_dt <- read.csv(""inputs/model/survival_rate_singapore.csv"",stringsAsFactors = FALSE)"
"0","#"
"0",""
"0","year_tbc <- 2006:2019"
"0","survival_rates_dt <- subset(survival_rates_dt,Year%in%year_tbc)"
"0","#Calculate cumulative survival rates"
"0","survival_rates_dt$Value <- sapply(1:nrow(survival_rates_dt),function(x)prod(subset(survival_rates_dt,Mode==survival_rates_dt[x,""Mode""] & Year==survival_rates_dt[x,""Year""] & Age<=survival_rates_dt[x,""Age""])$Value))"
"0",""
"0","plot_dt <- subset(survival_rates_dt,Model==""def"",select=-Year)"
"0",""
"0","plot_dt$min <- sapply(1:nrow(plot_dt),function(x)min(subset(survival_rates_dt,Mode==plot_dt[x,""Mode""] & Age==plot_dt[x,""Age""])$Value))"
"0","plot_dt$max <- sapply(1:nrow(plot_dt),function(x)max(subset(survival_rates_dt,Mode==plot_dt[x,""Mode""] & Age==plot_dt[x,""Age""])$Value))"
"0",""
"0","ggplot(plot_dt)+"
"0","  geom_line(aes(x = Age,y = Value,colour = Mode),"
"0","          size = 1.1,"
"0","          alpha = 1)+"
"0","  geom_ribbon(aes(x=Age,ymin=min,ymax=max,fill=Mode),"
"0","              alpha=0.5)+"
"0","  labs(y=""Cumulative \n Survival rates"")+"
"0","  scale_y_continuous(limits=c(0,1),expand=c(0,0.01))+"
"0","  scale_colour_milovanoff(palette_type = ""cat"",number_color = 3,name=NULL)+"
"0","  scale_fill_milovanoff(palette_type = ""cat"",number_color = 3,name=NULL)+"
"0","  theme_milovanoff(legend_position = ""right"")"
